"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2925],{8490:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"getting-started/example","title":"Example","description":"Assuming you have table Trade","source":"@site/docs/getting-started/example.md","sourceDirName":"getting-started","slug":"/getting-started/example","permalink":"/ag-grid-jpa-adapter/docs/getting-started/example","draft":false,"unlisted":false,"editUrl":"https://github.com/smolcan/ag-grid-jpa-adapter/tree/main/docs/docs/getting-started/example.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/ag-grid-jpa-adapter/docs/getting-started/installation"},"next":{"title":"Tutorial Intro","permalink":"/ag-grid-jpa-adapter/docs/intro"}}');var r=t(4848),i=t(8453);const s={sidebar_position:3},o="Example",d={},l=[{value:"Initialize the QueryBuilder",id:"initialize-the-querybuilder",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"example",children:"Example"})}),"\n",(0,r.jsxs)(n.p,{children:["Assuming you have table ",(0,r.jsx)(n.strong,{children:"Trade"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",metastring:'title="trade table"',children:"create table trade (\n    product           varchar(255),\n    portfolio         varchar(255),\n    book              varchar(255),\n    trade_id          serial\n        primary key,\n    submitter_id      integer,\n    submitter_deal_id integer,\n    deal_type         varchar(255),\n    bid_type          varchar(255),\n    current_value     numeric,\n    previous_value    numeric,\n    pl1               numeric,\n    pl2               numeric,\n    gain_dx           numeric,\n    sx_px             numeric,\n    x99_out           numeric,\n    batch             integer,\n    birth_date        date,\n    is_sold           boolean\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["And mapped ",(0,r.jsx)(n.strong,{children:"entity"})," for this table"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="Trade entity"',children:'@Entity\n@Table(name = "trade")\n@Getter @Setter\npublic class Trade {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = "trade_id")\n    private Long tradeId;\n\n    @Column(name = "product", length = 255)\n    private String product;\n\n    @Column(name = "portfolio", length = 255)\n    private String portfolio;\n\n    @Column(name = "book", length = 255)\n    private String book;\n\n    @Column(name = "submitter_id")\n    private Integer submitterId;\n\n    @Column(name = "submitter_deal_id")\n    private Integer submitterDealId;\n\n    @Column(name = "deal_type", length = 255)\n    private String dealType;\n\n    @Column(name = "bid_type", length = 255)\n    private String bidType;\n\n    @Column(name = "current_value")\n    private BigDecimal currentValue;\n\n    @Column(name = "previous_value")\n    private BigDecimal previousValue;\n\n    @Column(name = "pl1")\n    private BigDecimal pl1;\n\n    @Column(name = "pl2")\n    private BigDecimal pl2;\n\n    @Column(name = "gain_dx")\n    private BigDecimal gainDx;\n\n    @Column(name = "sx_px")\n    private BigDecimal sxPx;\n\n    @Column(name = "x99_out")\n    private BigDecimal x99Out;\n\n    @Column(name = "batch")\n    private Integer batch;\n    \n    @Column(name = "birth_date")\n    private LocalDate birthDate;\n    \n    @Column(name = "is_sold")\n    private Boolean isSold;\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"initialize-the-querybuilder",children:["Initialize the ",(0,r.jsx)(n.a,{href:"https://github.com/smolcan/ag-grid-jpa-adapter/blob/main/src/main/java/com/aggrid/jpa/adapter/query/QueryBuilder.java",children:"QueryBuilder"})]}),"\n",(0,r.jsxs)(n.p,{children:["To use the ",(0,r.jsx)(n.a,{href:"https://github.com/smolcan/ag-grid-jpa-adapter/blob/main/src/main/java/com/aggrid/jpa/adapter/query/QueryBuilder.java",children:"QueryBuilder"}),",\nyou need to initialize it with your entity class and an ",(0,r.jsx)(n.strong,{children:"EntityManager"}),".\nThe ",(0,r.jsx)(n.strong,{children:"getRows"})," method processes a ",(0,r.jsx)(n.a,{href:"https://github.com/smolcan/ag-grid-jpa-adapter/blob/main/src/main/java/com/aggrid/jpa/adapter/request/ServerSideGetRowsRequest.java",children:"ServerSideGetRowsRequest"})," payload\nand returns the data formatted according to the requirements of the grid."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",metastring:'title="Example in Spring Boot app"',children:"import com.aggrid.jpa.adapter.query.QueryBuilder;\nimport com.aggrid.jpa.adapter.response.LoadSuccessParams;\nimport com.aggrid.jpa.adapter.request.ServerSideGetRowsRequest;\n\nimport jakarta.persistence.EntityManager;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TradeService {\n    \n    private final EntityManager entityManager;\n    private final QueryBuilder<Trade> queryBuilder;\n    \n    @Autowired\n    public TradeService(EntityManager entityManager) {\n        this.entityManager = entityManager;\n        this.queryBuilder = new QueryBuilder<>(Trade.class, entityManager);\n    }\n    \n    /**\n     * Fetches rows from the database based on the grid's request.\n     *\n     * @param request the ServerSideGetRowsRequest payload from the grid.\n     * @return LoadSuccessParams containing the data formatted for the grid.\n     */\n    public LoadSuccessParams getRows(ServerSideGetRowsRequest request) {\n        return this.queryBuilder.getRows(request);\n    }\n}\n"})})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var a=t(6540);const r={},i=a.createContext(r);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);